{"ast":null,"code":"import _defineProperty from \"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/src/pages/Game.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Homer from \"../components/Homer\";\nimport config from \"../components/configSpringfieldVice.json\";\nimport JoyWrapper from \"../components/Joystick\";\nimport Timer from \"../components/Timer\";\nimport { Donut } from \"../components/Item\";\nimport { Biere } from \"../components/Item\";\nimport DonutCounter from \"../components/DonutCounter\";\nimport BoutonA from \"../components/BoutonA\";\nimport \"./game.css\";\nimport Modal from \"../components/Modal\";\nimport MovingObs from \"../components/MovingObs\";\nimport { getRandomArbitrary } from \"../components/helpers\";\nimport Obstacle from \"../components/Obstacle\";\nimport Bart from \"../components/Bart\";\nconst donutStatus = {\n  GROUND: \"ground\",\n  PICKED: \"picked\",\n  THROWN: \"thrown\"\n};\nconst objDisplayBlock = \"block\";\nconst objDisplayNone = \"none\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.testLimitsOfMap = () => {\n      if (this.state.positionY < config.limits.topLimit) this.setState({\n        positionY: config.limits.topLimit\n      });else if (this.state.positionY > config.limits.bottomLimit) this.setState({\n        positionY: config.limits.bottomLimit\n      });else if (this.state.positionX > config.limits.rightLimit) this.setState({\n        positionX: config.limits.rightLimit\n      });else if (this.state.positionX < config.limits.leftLimit) this.setState({\n        positionX: config.limits.leftLimit\n      });\n    };\n\n    this.setStep = (stepX, stepY) => {\n      this.stepX = stepX;\n      this.stepY = stepY;\n    };\n\n    this.move = () => {\n      const _this$state = this.state,\n            positionX = _this$state.positionX,\n            positionY = _this$state.positionY,\n            positionMovingObsX = _this$state.positionMovingObsX;\n      this.setState({\n        positionX: positionX + this.stepX,\n        positionY: positionY + this.stepY,\n        moving: true\n      });\n\n      if (this.stepX < 0) {\n        this.setState({\n          isHomerRunningLeft: true\n        });\n      } else if (this.stepX > 0) {\n        this.setState({\n          isHomerRunningLeft: false\n        });\n      } // if (this.state.isRunning)\n      // \tthis.timeOut = setTimeout(() => this.move(), 10);\n\n\n      if (this.state.isRunning === false) this.stopRunning();\n      if (positionX !== config.limits.leftLimit) this.setState({\n        donutPosition: this.state.donutPosition - this.stepX / config.background.defilement,\n        relativePositionX: this.state.positionX - this.state.donutPosition,\n        positionMovingObsX: positionMovingObsX - this.stepX / config.background.defilement\n      });\n    };\n\n    this.startRunning = () => {\n      this.setState({\n        isRunning: true\n      });\n      this.state.intervalHomer = setInterval(() => this.move(), 50);\n    };\n\n    this.stopRunning = () => {\n      this.setState({\n        isRunning: false\n      });\n      clearInterval(this.state.intervalHomer);\n    };\n\n    this.moveObs = () => {\n      let i = 0;\n      setInterval(() => {\n        let newPosX = this.state.opponentPos.movX[i];\n        let newPosY = this.state.opponentPos.movY[i];\n        this.setState({\n          opponentPos: _objectSpread({}, this.state.opponentPos, {\n            positionMovingObsX: newPosX,\n            positionMovingObsY: newPosY\n          })\n        });\n        i++;\n\n        if (i >= this.state.opponentPos.movX.length) {\n          i = 0;\n        }\n      }, 1000);\n    };\n\n    this.moveBart = () => {\n      let i = 0;\n      setInterval(() => {\n        let newPosX = this.state.bartPos.BartMovX[i];\n        let newPosY = this.state.bartPos.BartMovY[i];\n        this.setState({\n          bartPos: _objectSpread({}, this.state.bartPos, {\n            positionBartX: newPosX,\n            positionBartY: newPosY\n          })\n        });\n        i++;\n\n        if (i >= this.state.bartPos.BartMovX.length) {\n          i = 0;\n        }\n      }, 1000);\n    };\n\n    this.tick = () => {\n      let seconds = this.state.seconds;\n      this.setState({\n        seconds: seconds - 1\n      });\n\n      if (seconds === 0) {\n        this.setState({\n          seconds: 0\n        });\n        alert(\"GAME OVER\");\n        clearInterval(this.interval);\n      }\n    };\n\n    this.componentDidMount = () => {\n      this.interval = setInterval(() => {\n        this.tick();\n      }, 1000);\n      setInterval(() => this.gameLoop(), 100);\n      this.moveObs();\n      this.moveBart();\n    };\n\n    this.pauseTimer = () => {\n      if (this.state.paused === false) {\n        clearInterval(this.interval);\n      } else {\n        this.componentDidMount();\n      }\n    };\n\n    this.pauseGame = () => {\n      this.setState({\n        paused: !this.state.paused\n      });\n      this.pauseTimer();\n    };\n\n    this.collisionDetection = item => {\n      if (this.state.relativePositionX > item.positionDonutX - 30 && this.state.relativePositionX < item.positionDonutX + 30 && this.state.positionY < item.positionDonutY + 30 && this.state.positionY > item.positionDonutY - 30 && item.status === \"ground\") item.status = \"picked\";\n    };\n\n    this.collisionDetectionObstacle = item => {\n      if (this.state.relativePositionX > item.positionObstacleX - 5 && this.state.relativePositionX < item.positionObstacleX + 10 && this.state.positionY < item.positionObstacleY + 30 && this.state.positionY > item.positionObstacleY - 50) {\n        this.setState({\n          isRunning: false,\n          isBlocked: true\n        });\n      }\n    };\n\n    this.donutCount = () => {\n      let donutCount = 0; // this.state.donutPopped.map((item) => {\n      // \tif (item.status === \"picked\" && item.display === true) {\n      // \t\treturn donutCount = donutCount + 1\n      // \t\t}\n      // \tif (item.status === \"picked\" && item.display === false) {\n      // \t\treturn donutCount = donutCount\n      // \t\t}\n      // \t}\n      // );\n\n      this.state.donutPopped.map(item => item.status === \"picked\" ? donutCount = donutCount + 1 : donutCount = donutCount);\n      return donutCount;\n    };\n\n    this.throwingDonut = () => {\n      this.setState({\n        isThrowing: true // donutPopped: {...this.state.donutPopped, picked: false}\n\n      });\n      let donutIndex = this.state.donutPopped.findIndex(item => item.status === \"picked\");\n      console.log(donutIndex);\n      if (donutIndex < 0) donutIndex = 0;\n      const donutPopped = this.state.donutPopped;\n      donutPopped[donutIndex].status = donutStatus.THROWN; // donutPopped[donutIndex].display = false;\n\n      this.setState({\n        donutPopped\n      }); // console.log(\"throw\")\n    };\n\n    this.stopThrowingDonut = () => {\n      this.setState({\n        isThrowing: false,\n        displayDonut: false\n      }); // console.log(\"stopthrow\")\n    };\n\n    this.gameLoop = () => {\n      this.state.donutPopped.map(item => this.collisionDetection(item));\n      this.state.obstaclePopped.map(item => {\n        this.collisionDetectionObstacle(item);\n      });\n      this.testLimitsOfMap();\n    };\n\n    this.state = {\n      positionX: config.initialPosition.x,\n      positionY: config.initialPosition.y,\n      //positionObstacleY: getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit),\n      //positionObstacleX: getRandomArbitrary(config.limits.leftLimit, config.limits.rightLimit),\n      showModal: false,\n      seconds: config.timer.seconds,\n      paused: false,\n      donutPosition: 0,\n      obstaclePosition: 0,\n      positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      catchDonut: false,\n      moving: false,\n      isBlocked: false,\n      isThrowing: false,\n      donutPopped: [{\n        positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n        positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false,\n        status: donutStatus.GROUND,\n        display: true\n      }, {\n        positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n        positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false,\n        status: donutStatus.GROUND,\n        display: true\n      }, {\n        positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n        positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false,\n        status: donutStatus.GROUND,\n        display: true\n      }, {\n        positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n        positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false,\n        status: donutStatus.GROUND,\n        display: true\n      }],\n      bierePopped: [{\n        positionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n        positionBiereY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }, {\n        positionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 2000)),\n        positionBiereY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }, {\n        positionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n        positionBiereY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }, {\n        positionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 4000)),\n        positionBiereY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }],\n      obstaclePopped: [{\n        positionObstacleX: parseInt(getRandomArbitrary(config.limits.leftLimit + 100, 1000)),\n        positionObstacleY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }, {\n        positionObstacleX: parseInt(getRandomArbitrary(1000, 3000)),\n        positionObstacleY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      }],\n      relativePositionX: config.initialPosition.x,\n      isRunning: false,\n      isHomerRunningLeft: false,\n      opponentPos: {\n        positionMovingObsX: 300,\n        positionMovingObsY: 200,\n        movX: [350, 350, 400, 400, 500, 500, 550, 550, 600, 600, 550, 550, 500, 500, 450, 450, 400, 400],\n        movY: [250, 250, 250, 250, 300, 300, 300, 300, 250, 250, 300, 300, 250, 250, 200, 200, 230, 230]\n      },\n      // {\n      // positionMovingObsX: 850,\n      // positionMovingObsY: 400,\n      // movX: [800, 800, 750, 750, 700, 700, 650, 650, 650, 650, 700, 700, 700, 700, 750, 750],\n      // movY: [350, 350, 400, 400, 350, 350, 350, 350, 300, 300, 250, 250, 200, 200, 300, 300],\n      // },\n      bartPos: {\n        positionBartX: 6000,\n        positionBartY: 200,\n        BartMovX: [6000, 6000, 6000, 6020, 6020, 6050, 6050, 6100, 6100, 6150, 6150, 6200, 6250, 6250, 6300, 6300, 6250, 6250, 6200, 6200, 6100, 6050],\n        BartMovY: [200, 250, 250, 250, 300, 300, 300, 300, 250, 250, 300, 300, 250, 250, 200, 200, 230, 230, 200, 200, 180, 180]\n      },\n      globalPosition: 0\n    };\n    this.stepX = 0;\n    this.stepY = 0;\n    this.tick = this.tick.bind(this);\n    this.interval = undefined;\n  }\n\n  render() {\n    // Modal\n    let params = new URLSearchParams(this.props.location.search);\n    const bgStyle = {\n      backgroundPositionY: config.background.position,\n      backgroundPositionX: -this.state.positionX / config.background.defilement,\n      height: config.background.height\n    };\n    return React.createElement(\"div\", {\n      className: \"game\",\n      style: bgStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(Donut, {\n      donutPopped: this.state.donutPopped,\n      donutPosition: this.state.donutPosition,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }), React.createElement(Biere, {\n      bierePopped: this.state.bierePopped,\n      bierePosition: this.state.donutPosition,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }), React.createElement(Obstacle, {\n      obstaclePopped: this.state.obstaclePopped,\n      obstaclePosition: this.state.donutPosition,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }), React.createElement(MovingObs, {\n      positionMovingObsX: this.state.opponentPos.positionMovingObsX,\n      positionMovingObsY: this.state.opponentPos.positionMovingObsY,\n      opponentPos: this.state.opponentPos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }), React.createElement(Bart, {\n      positionBartX: this.state.bartPos.positionBartX,\n      positionBartY: this.state.bartPos.positionBartY,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }), React.createElement(Homer, {\n      positionX: this.state.positionX,\n      positionY: this.state.positionY,\n      isRunning: this.state.isRunning,\n      isHomerRunningLeft: this.state.isHomerRunningLeft,\n      donutCount: this.donutCount(),\n      isThrowing: this.state.isThrowing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    }), React.createElement(DonutCounter, {\n      donutCount: this.donutCount(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }), React.createElement(JoyWrapper, {\n      setStep: this.setStep,\n      startRunning: this.startRunning,\n      stopRunning: this.stopRunning,\n      toTheRight: this.toTheRight,\n      toTheLeft: this.toTheLeft,\n      toTheTop: this.toTheTop,\n      toTheBottom: this.toTheBottom,\n      displayJoystick: this.state.paused,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }), React.createElement(BoutonA, {\n      throwingDonut: this.throwingDonut,\n      stopThrowingDonut: this.stopThrowingDonut,\n      displayButtonA: this.state.paused,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }), React.createElement(Timer, {\n      pauseGame: this.pauseGame,\n      seconds: this.state.seconds,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }), params.get(\"modal\") && React.createElement(Modal, {\n      modal: this.props.location.search,\n      origin: null,\n      resume: () => this.pauseGame(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/src/pages/Game.js"],"names":["React","Component","Homer","config","JoyWrapper","Timer","Donut","Biere","DonutCounter","BoutonA","Modal","MovingObs","getRandomArbitrary","Obstacle","Bart","donutStatus","GROUND","PICKED","THROWN","objDisplayBlock","objDisplayNone","Game","constructor","props","testLimitsOfMap","state","positionY","limits","topLimit","setState","bottomLimit","positionX","rightLimit","leftLimit","setStep","stepX","stepY","move","positionMovingObsX","moving","isHomerRunningLeft","isRunning","stopRunning","donutPosition","background","defilement","relativePositionX","startRunning","intervalHomer","setInterval","clearInterval","moveObs","i","newPosX","opponentPos","movX","newPosY","movY","positionMovingObsY","length","moveBart","bartPos","BartMovX","BartMovY","positionBartX","positionBartY","tick","seconds","alert","interval","componentDidMount","gameLoop","pauseTimer","paused","pauseGame","collisionDetection","item","positionDonutX","positionDonutY","status","collisionDetectionObstacle","positionObstacleX","positionObstacleY","isBlocked","donutCount","donutPopped","map","throwingDonut","isThrowing","donutIndex","findIndex","console","log","stopThrowingDonut","displayDonut","obstaclePopped","initialPosition","x","y","showModal","timer","obstaclePosition","parseInt","catchDonut","picked","display","bierePopped","positionBiereX","positionBiereY","globalPosition","bind","undefined","render","params","URLSearchParams","location","search","bgStyle","backgroundPositionY","position","backgroundPositionX","height","toTheRight","toTheLeft","toTheTop","toTheBottom","get"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Homer from \"../components/Homer\";\nimport config from \"../components/configSpringfieldVice.json\";\nimport JoyWrapper from \"../components/Joystick\";\nimport Timer from \"../components/Timer\";\nimport { Donut } from \"../components/Item\";\nimport { Biere } from \"../components/Item\";\nimport DonutCounter from \"../components/DonutCounter\";\nimport BoutonA from \"../components/BoutonA\";\nimport \"./game.css\";\nimport Modal from \"../components/Modal\";\nimport MovingObs from \"../components/MovingObs\";\nimport { getRandomArbitrary } from \"../components/helpers\";\nimport Obstacle from \"../components/Obstacle\";\nimport Bart from \"../components/Bart\";\n\nconst donutStatus = {\n\tGROUND: \"ground\",\n\tPICKED: \"picked\",\n\tTHROWN: \"thrown\"\n};\n\nconst objDisplayBlock = \"block\";\nconst objDisplayNone = \"none\";\n\nclass Game extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpositionX: config.initialPosition.x,\n\t\t\tpositionY: config.initialPosition.y,\n\t\t\t//positionObstacleY: getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit),\n\t\t\t//positionObstacleX: getRandomArbitrary(config.limits.leftLimit, config.limits.rightLimit),\n\t\t\tshowModal: false,\n\t\t\tseconds: config.timer.seconds,\n\t\t\tpaused: false,\n\t\t\tdonutPosition: 0,\n\t\t\tobstaclePosition: 0,\n\t\t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t\tcatchDonut: false,\n\t\t\tmoving: false,\n\t\t\tisBlocked: false,\n\t\t\tisThrowing: false,\n\t\t\tdonutPopped: [\n\t\t\t\t{\n\t\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n\t\t\t\t\tpositionDonutY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false,\n\t\t\t\t\tstatus: donutStatus.GROUND,\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n\t\t\t\t\tpositionDonutY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false,\n\t\t\t\t\tstatus: donutStatus.GROUND,\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n\t\t\t\t\tpositionDonutY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false,\n\t\t\t\t\tstatus: donutStatus.GROUND,\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n\t\t\t\t\tpositionDonutY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false,\n\t\t\t\t\tstatus: donutStatus.GROUND,\n\t\t\t\t\tdisplay: true\n\t\t\t\t}\n\t\t\t],\n\t\t\tbierePopped: [\n\t\t\t\t{\n\t\t\t\t\tpositionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 1000)),\n\t\t\t\t\tpositionBiereY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 2000)),\n\t\t\t\t\tpositionBiereY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t\t\t\tpositionBiereY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionBiereX: parseInt(getRandomArbitrary(config.limits.leftLimit, 4000)),\n\t\t\t\t\tpositionBiereY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t}\n\t\t\t],\n\t\t\tobstaclePopped: [\n\t\t\t\t{\n\t\t\t\t\tpositionObstacleX: parseInt(getRandomArbitrary(config.limits.leftLimit + 100, 1000)),\n\t\t\t\t\tpositionObstacleY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpositionObstacleX: parseInt(getRandomArbitrary(1000, 3000)),\n\t\t\t\t\tpositionObstacleY: parseInt(\n\t\t\t\t\t\tgetRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)\n\t\t\t\t\t),\n\t\t\t\t\tpicked: false\n\t\t\t\t}\n\t\t\t],\n\t\t\trelativePositionX: config.initialPosition.x,\n\t\t\tisRunning: false,\n\t\t\tisHomerRunningLeft: false,\n\t\t\topponentPos: {\n\t\t\t\tpositionMovingObsX: 300,\n\t\t\t\tpositionMovingObsY: 200,\n\t\t\t\tmovX: [350, 350, 400, 400, 500, 500, 550, 550, 600, 600, 550, 550, 500, 500, 450, 450, 400, 400],\n\t\t\t\tmovY: [250, 250, 250, 250, 300, 300, 300, 300, 250, 250, 300, 300, 250, 250, 200, 200, 230, 230]\n\t\t\t},\n\t\t\t// {\n\t\t\t// positionMovingObsX: 850,\n\t\t\t// positionMovingObsY: 400,\n\t\t\t// movX: [800, 800, 750, 750, 700, 700, 650, 650, 650, 650, 700, 700, 700, 700, 750, 750],\n\t\t\t// movY: [350, 350, 400, 400, 350, 350, 350, 350, 300, 300, 250, 250, 200, 200, 300, 300],\n\t\t\t// },\n\t\t\tbartPos: {\n\t\t\t\tpositionBartX: 6000,\n\t\t\t\tpositionBartY: 200,\n\t\t\t\tBartMovX: [\n\t\t\t\t\t6000,\n\t\t\t\t\t6000,\n\t\t\t\t\t6000,\n\t\t\t\t\t6020,\n\t\t\t\t\t6020,\n\t\t\t\t\t6050,\n\t\t\t\t\t6050,\n\t\t\t\t\t6100,\n\t\t\t\t\t6100,\n\t\t\t\t\t6150,\n\t\t\t\t\t6150,\n\t\t\t\t\t6200,\n\t\t\t\t\t6250,\n\t\t\t\t\t6250,\n\t\t\t\t\t6300,\n\t\t\t\t\t6300,\n\t\t\t\t\t6250,\n\t\t\t\t\t6250,\n\t\t\t\t\t6200,\n\t\t\t\t\t6200,\n\t\t\t\t\t6100,\n\t\t\t\t\t6050\n\t\t\t\t],\n\t\t\t\tBartMovY: [\n\t\t\t\t\t200,\n\t\t\t\t\t250,\n\t\t\t\t\t250,\n\t\t\t\t\t250,\n\t\t\t\t\t300,\n\t\t\t\t\t300,\n\t\t\t\t\t300,\n\t\t\t\t\t300,\n\t\t\t\t\t250,\n\t\t\t\t\t250,\n\t\t\t\t\t300,\n\t\t\t\t\t300,\n\t\t\t\t\t250,\n\t\t\t\t\t250,\n\t\t\t\t\t200,\n\t\t\t\t\t200,\n\t\t\t\t\t230,\n\t\t\t\t\t230,\n\t\t\t\t\t200,\n\t\t\t\t\t200,\n\t\t\t\t\t180,\n\t\t\t\t\t180\n\t\t\t\t]\n\t\t\t},\n\t\t\tglobalPosition: 0\n\t\t};\n\n\t\tthis.stepX = 0;\n\t\tthis.stepY = 0;\n\t\tthis.tick = this.tick.bind(this);\n\t\tthis.interval = undefined;\n\t}\n\n\ttestLimitsOfMap = () => {\n\t\tif (this.state.positionY < config.limits.topLimit) this.setState({ positionY: config.limits.topLimit });\n\t\telse if (this.state.positionY > config.limits.bottomLimit)\n\t\t\tthis.setState({ positionY: config.limits.bottomLimit });\n\t\telse if (this.state.positionX > config.limits.rightLimit)\n\t\t\tthis.setState({ positionX: config.limits.rightLimit });\n\t\telse if (this.state.positionX < config.limits.leftLimit)\n\t\t\tthis.setState({ positionX: config.limits.leftLimit });\n\t};\n\n\tsetStep = (stepX, stepY) => {\n\t\tthis.stepX = stepX;\n\t\tthis.stepY = stepY;\n\t};\n\n\tmove = () => {\n\t\tconst { positionX, positionY, positionMovingObsX } = this.state;\n\n\t\tthis.setState({\n\t\t\tpositionX: positionX + this.stepX,\n\t\t\tpositionY: positionY + this.stepY,\n\t\t\tmoving: true\n\t\t});\n\n\t\tif (this.stepX < 0) {\n\t\t\tthis.setState({ isHomerRunningLeft: true });\n\t\t} else if (this.stepX > 0) {\n\t\t\tthis.setState({ isHomerRunningLeft: false });\n\t\t}\n\t\t// if (this.state.isRunning)\n\t\t// \tthis.timeOut = setTimeout(() => this.move(), 10);\n\n\t\tif (this.state.isRunning === false) this.stopRunning();\n\n\t\tif (positionX !== config.limits.leftLimit)\n\t\t\tthis.setState({\n\t\t\t\tdonutPosition: this.state.donutPosition - this.stepX / config.background.defilement,\n\t\t\t\trelativePositionX: this.state.positionX - this.state.donutPosition,\n\t\t\t\tpositionMovingObsX: positionMovingObsX - this.stepX / config.background.defilement\n\t\t\t});\n\t};\n\n\tstartRunning = () => {\n\t\tthis.setState({ isRunning: true });\n\t\tthis.state.intervalHomer = setInterval(() => this.move(), 50);\n\t};\n\tstopRunning = () => {\n\t\tthis.setState({ isRunning: false });\n\t\tclearInterval(this.state.intervalHomer);\n\t};\n\n\tmoveObs = () => {\n\t\tlet i = 0;\n\t\tsetInterval(() => {\n\t\t\tlet newPosX = this.state.opponentPos.movX[i];\n\t\t\tlet newPosY = this.state.opponentPos.movY[i];\n\t\t\tthis.setState({\n\t\t\t\topponentPos: { ...this.state.opponentPos, positionMovingObsX: newPosX, positionMovingObsY: newPosY }\n\t\t\t});\n\t\t\ti++;\n\t\t\tif (i >= this.state.opponentPos.movX.length) {\n\t\t\t\ti = 0;\n\t\t\t}\n\t\t}, 1000);\n\t};\n\n\tmoveBart = () => {\n\t\tlet i = 0;\n\t\tsetInterval(() => {\n\t\t\tlet newPosX = this.state.bartPos.BartMovX[i];\n\t\t\tlet newPosY = this.state.bartPos.BartMovY[i];\n\t\t\tthis.setState({ bartPos: { ...this.state.bartPos, positionBartX: newPosX, positionBartY: newPosY } });\n\t\t\ti++;\n\t\t\tif (i >= this.state.bartPos.BartMovX.length) {\n\t\t\t\ti = 0;\n\t\t\t}\n\t\t}, 1000);\n\t};\n\n\ttick = () => {\n\t\tlet { seconds } = this.state;\n\t\tthis.setState({ seconds: seconds - 1 });\n\n\t\tif (seconds === 0) {\n\t\t\tthis.setState({ seconds: 0 });\n\t\t\talert(\"GAME OVER\");\n\t\t\tclearInterval(this.interval);\n\t\t}\n\t};\n\n\tcomponentDidMount = () => {\n\t\tthis.interval = setInterval(() => {\n\t\t\tthis.tick();\n\t\t}, 1000);\n\t\tsetInterval(() => this.gameLoop(), 100);\n\n\t\tthis.moveObs();\n\t\tthis.moveBart();\n\t};\n\n\tpauseTimer = () => {\n\t\tif (this.state.paused === false) {\n\t\t\tclearInterval(this.interval);\n\t\t} else {\n\t\t\tthis.componentDidMount();\n\t\t}\n\t};\n\n\tpauseGame = () => {\n\t\tthis.setState({ paused: !this.state.paused });\n\t\tthis.pauseTimer();\n\t};\n\n\tcollisionDetection = (item) => {\n\t\tif (\n\t\t\tthis.state.relativePositionX > item.positionDonutX - 30 &&\n\t\t\tthis.state.relativePositionX < item.positionDonutX + 30 &&\n\t\t\tthis.state.positionY < item.positionDonutY + 30 &&\n\t\t\tthis.state.positionY > item.positionDonutY - 30 &&\n\t\t\titem.status === \"ground\"\n\t\t)\n\t\t\titem.status = \"picked\";\n\t};\n\n\tcollisionDetectionObstacle = (item) => {\n\t\tif (\n\t\t\tthis.state.relativePositionX > item.positionObstacleX - 5 &&\n\t\t\tthis.state.relativePositionX < item.positionObstacleX + 10 &&\n\t\t\tthis.state.positionY < item.positionObstacleY + 30 &&\n\t\t\tthis.state.positionY > item.positionObstacleY - 50\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tisRunning: false,\n\t\t\t\tisBlocked: true\n\t\t\t});\n\t\t}\n\t};\n\n\tdonutCount = () => {\n\t\tlet donutCount = 0;\n\t\t// this.state.donutPopped.map((item) => {\n\t\t// \tif (item.status === \"picked\" && item.display === true) {\n\t\t// \t\treturn donutCount = donutCount + 1\n\t\t// \t\t}\n\t\t// \tif (item.status === \"picked\" && item.display === false) {\n\t\t// \t\treturn donutCount = donutCount\n\t\t// \t\t}\n\t\t// \t}\n\t\t// );\n\t\tthis.state.donutPopped.map((item) =>\n\t\t\titem.status === \"picked\" ? (donutCount = donutCount + 1) : (donutCount = donutCount)\n\t\t);\n\n\t\treturn donutCount;\n\t};\n\n\tthrowingDonut = () => {\n\t\tthis.setState({\n\t\t\tisThrowing: true\n\t\t\t// donutPopped: {...this.state.donutPopped, picked: false}\n\t\t});\n\t\tlet donutIndex = this.state.donutPopped.findIndex((item) => item.status === \"picked\");\n\t\tconsole.log(donutIndex);\n\t\tif (donutIndex < 0) donutIndex = 0;\n\t\tconst { donutPopped } = this.state;\n\t\tdonutPopped[donutIndex].status = donutStatus.THROWN;\n\t\t// donutPopped[donutIndex].display = false;\n\t\tthis.setState({ donutPopped });\n\t\t// console.log(\"throw\")\n\t};\n\n\tstopThrowingDonut = () => {\n\t\tthis.setState({ isThrowing: false, displayDonut: false });\n\t\t// console.log(\"stopthrow\")\n\t};\n\n\tgameLoop = () => {\n\t\tthis.state.donutPopped.map((item) => this.collisionDetection(item));\n\n\t\tthis.state.obstaclePopped.map((item) => {\n\t\t\tthis.collisionDetectionObstacle(item);\n\t\t});\n\n\t\tthis.testLimitsOfMap();\n\t};\n\n\trender() {\n\t\t// Modal\n\t\tlet params = new URLSearchParams(this.props.location.search);\n\n\t\tconst bgStyle = {\n\t\t\tbackgroundPositionY: config.background.position,\n\t\t\tbackgroundPositionX: -this.state.positionX / config.background.defilement,\n\t\t\theight: config.background.height\n\t\t};\n\n\t\treturn (\n\t\t\t<div className=\"game\" style={bgStyle}>\n\t\t\t\t<Donut donutPopped={this.state.donutPopped} donutPosition={this.state.donutPosition} />\n\t\t\t\t<Biere bierePopped={this.state.bierePopped} bierePosition={this.state.donutPosition} />\n\t\t\t\t<Obstacle obstaclePopped={this.state.obstaclePopped} obstaclePosition={this.state.donutPosition} />\n\t\t\t\t<MovingObs\n\t\t\t\t\tpositionMovingObsX={this.state.opponentPos.positionMovingObsX}\n\t\t\t\t\tpositionMovingObsY={this.state.opponentPos.positionMovingObsY}\n\t\t\t\t\topponentPos={this.state.opponentPos}\n\t\t\t\t/>\n\t\t\t\t<Bart\n\t\t\t\t\tpositionBartX={this.state.bartPos.positionBartX}\n\t\t\t\t\tpositionBartY={this.state.bartPos.positionBartY}\n\t\t\t\t/>\n\t\t\t\t<Homer\n\t\t\t\t\tpositionX={this.state.positionX}\n\t\t\t\t\tpositionY={this.state.positionY}\n\t\t\t\t\tisRunning={this.state.isRunning}\n\t\t\t\t\tisHomerRunningLeft={this.state.isHomerRunningLeft}\n\t\t\t\t\tdonutCount={this.donutCount()}\n\t\t\t\t\tisThrowing={this.state.isThrowing}\n\t\t\t\t/>\n\n\t\t\t\t<DonutCounter donutCount={this.donutCount()} />\n\n\t\t\t\t<JoyWrapper\n\t\t\t\t\tsetStep={this.setStep}\n\t\t\t\t\tstartRunning={this.startRunning}\n\t\t\t\t\tstopRunning={this.stopRunning}\n\t\t\t\t\ttoTheRight={this.toTheRight}\n\t\t\t\t\ttoTheLeft={this.toTheLeft}\n\t\t\t\t\ttoTheTop={this.toTheTop}\n\t\t\t\t\ttoTheBottom={this.toTheBottom}\n\t\t\t\t\tdisplayJoystick={this.state.paused}\n\t\t\t\t/>\n\n\t\t\t\t<BoutonA\n\t\t\t\t\tthrowingDonut={this.throwingDonut}\n\t\t\t\t\tstopThrowingDonut={this.stopThrowingDonut}\n\t\t\t\t\tdisplayButtonA={this.state.paused}\n\t\t\t\t/>\n\n\t\t\t\t<Timer pauseGame={this.pauseGame} seconds={this.state.seconds} />\n\n\t\t\t\t{params.get(\"modal\") && (\n\t\t\t\t\t<Modal modal={this.props.location.search} origin={null} resume={() => this.pauseGame()} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/src/pages/Game.js\";\nimport React, { Component } from \"react\";\nimport Homer from \"../components/Homer\";\nimport ObstacleF from \"../components/ObstacleF\";\nimport config from \"../components/configSpringfieldVice.json\";\nimport JoyWrapper from \"../components/Joystick\";\nimport Timer from \"../components/Timer\";\nimport Donut from \"../components/Item\";\nimport DonutCounter from \"../components/DonutCounter\";\nimport BoutonA from \"../components/BoutonA\";\nimport \"./game.css\";\nimport Modal from \"../components/Modal\";\nimport { getRandomArbitrary } from \"../components/helpers\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.testLimitsOfMap = () => {\n      if (this.state.positionY < config.limits.topLimit) this.setState({\n        positionY: config.limits.topLimit\n      });else if (this.state.positionY > config.limits.bottomLimit) this.setState({\n        positionY: config.limits.bottomLimit\n      });else if (this.state.positionX > config.limits.rightLimit) this.setState({\n        positionX: config.limits.rightLimit\n      });else if (this.state.positionX < config.limits.leftLimit) this.setState({\n        positionX: config.limits.leftLimit\n      });\n    };\n\n    this.move = (stepX, stepY) => {\n      const _this$state = this.state,\n            positionX = _this$state.positionX,\n            positionY = _this$state.positionY,\n            positionDonutX = _this$state.positionDonutX,\n            positionObstacleX = _this$state.positionObstacleX;\n      this.setState({\n        positionX: positionX + stepX,\n        positionY: positionY + stepY\n      });\n      if (positionX !== config.limits.leftLimit) this.setState({\n        positionDonutX: positionDonutX - stepX / config.background.defilement,\n        positionObstacleX: positionObstacleX - stepX / config.background.defilement\n      });\n      this.stopMove();\n      this.timeOut = setTimeout(() => this.move(stepX, stepY), 20);\n      this.collisionDetection();\n    };\n\n    this.stopMove = () => {\n      clearTimeout(this.timeOut);\n    };\n\n    this.tick = () => {\n      let seconds = this.state.seconds;\n      this.setState({\n        seconds: seconds - 1\n      });\n\n      if (seconds === 0) {\n        this.setState({\n          seconds: 0\n        });\n        alert(\"GAME OVER\");\n        clearInterval(this.interval);\n      }\n    };\n\n    this.componentDidMount = () => {\n      this.interval = setInterval(() => this.tick(), 1000);\n    };\n\n    this.pauseTimer = () => {\n      if (this.state.paused === false) {\n        clearInterval(this.interval);\n      } else {\n        this.componentDidMount();\n      }\n    };\n\n    this.pauseGame = () => {\n      this.setState({\n        paused: !this.state.paused\n      });\n      this.pauseTimer();\n    };\n\n    this.showModal = () => {\n      this.setState({\n        showModal: true\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.collisionDetection = () => {\n      if (this.state.positionX > this.state.positionDonutX - 30 && this.state.positionX < this.state.positionDonutX + 30 && this.state.positionY < this.state.positionDonutY + 30 && this.state.positionY > this.state.positionDonutY - 30) return this.setState({\n        donutCount: this.state.donutCount + 1\n      });\n    };\n\n    this.throwingDonut = () => {\n      this.setState({\n        donutCount: this.state.donutCount - 1\n      });\n    };\n\n    this.popDonut = () => {\n      // const donutPoped = [\n      // \t{\n      // \t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n      // \t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      // \t\tpicked: false\n      // \t},\n      // \t{\n      // \t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n      // \t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      // \t\tpicked: false\n      // \t}\n      // ];\n      this.donutPoped.push({\n        positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n        positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n        picked: false\n      });\n      return donutPoped;\n    };\n\n    this.state = {\n      positionX: config.initialPosition.x,\n      positionY: config.initialPosition.y,\n      positionObstacleY: getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit),\n      positionObstacleX: getRandomArbitrary(config.limits.leftLimit, config.limits.rightLimit),\n      showModal: false,\n      seconds: config.timer.seconds,\n      paused: false,\n      positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n      positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      donutCount: 0\n    };\n    this.donutPoped = [{\n      positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n      positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      picked: false\n    }, {\n      positionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n      positionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n      picked: false\n    }];\n    this.tick = this.tick.bind(this);\n    this.interval = undefined;\n  }\n\n  render() {\n    const bgStyle = {\n      backgroundPositionY: config.background.position,\n      backgroundPositionX: -this.state.positionX / config.background.defilement,\n      height: config.background.height\n    };\n    return React.createElement(\"div\", {\n      className: \"game\",\n      style: bgStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, this.testLimitsOfMap(), React.createElement(Donut, {\n      donutPoped: this.popDonut(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(ObstacleF, {\n      positionObstacleX: this.state.positionObstacleX,\n      positionObstacleY: this.state.positionObstacleY,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(Homer, {\n      positionX: this.state.positionX,\n      positionY: this.state.positionY,\n      donut: this.state.catchDonut,\n      throwing: this.state.throwing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(DonutCounter, {\n      donutCount: this.state.donutCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(JoyWrapper, {\n      move: this.move,\n      stopMove: this.stopMove,\n      toTheRight: this.toTheRight,\n      toTheLeft: this.toTheLeft,\n      toTheTop: this.toTheTop,\n      toTheBottom: this.toTheBottom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(BoutonA, {\n      throwingDonut: this.throwingDonut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(Timer, {\n      pauseGame: this.pauseGame,\n      showModal: this.showModal,\n      seconds: this.state.seconds,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(Modal, {\n      className: \"modal\",\n      pauseGame: this.pauseGame,\n      show: this.state.showModal,\n      hideModal: this.hideModal,\n      showModal: this.showModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/src/pages/Game.js"],"names":["React","Component","Homer","ObstacleF","config","JoyWrapper","Timer","Donut","DonutCounter","BoutonA","Modal","getRandomArbitrary","Game","constructor","props","testLimitsOfMap","state","positionY","limits","topLimit","setState","bottomLimit","positionX","rightLimit","leftLimit","move","stepX","stepY","positionDonutX","positionObstacleX","background","defilement","stopMove","timeOut","setTimeout","collisionDetection","clearTimeout","tick","seconds","alert","clearInterval","interval","componentDidMount","setInterval","pauseTimer","paused","pauseGame","showModal","hideModal","positionDonutY","donutCount","throwingDonut","popDonut","donutPoped","push","parseInt","picked","initialPosition","x","y","positionObstacleY","timer","bind","undefined","render","bgStyle","backgroundPositionY","position","backgroundPositionX","height","catchDonut","throwing","toTheRight","toTheLeft","toTheTop","toTheBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Homer from \"../components/Homer\";\nimport ObstacleF from \"../components/ObstacleF\";\nimport config from \"../components/configSpringfieldVice.json\";\nimport JoyWrapper from \"../components/Joystick\";\nimport Timer from \"../components/Timer\";\nimport Donut from \"../components/Item\";\nimport DonutCounter from \"../components/DonutCounter\";\nimport BoutonA from \"../components/BoutonA\";\nimport \"./game.css\";\nimport Modal from \"../components/Modal\";\nimport { getRandomArbitrary } from \"../components/helpers\";\n\nclass Game extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpositionX: config.initialPosition.x,\n\t\t\tpositionY: config.initialPosition.y,\n\t\t\tpositionObstacleY: getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit),\n\t\t\tpositionObstacleX: getRandomArbitrary(config.limits.leftLimit, config.limits.rightLimit),\n\t\t\tshowModal: false,\n\t\t\tseconds: config.timer.seconds,\n\t\t\tpaused: false,\n\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t\tdonutCount: 0\n\t\t};\n\n\t\tthis.donutPoped = [\n\t\t\t{\n\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t\t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t\t\tpicked: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t\t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t\t\tpicked: false\n\t\t\t}\n\t\t]\n\t\tthis.tick = this.tick.bind(this);\n\t\tthis.interval = undefined;\n\t}\n\n\ttestLimitsOfMap = () => {\n\t\tif (this.state.positionY < config.limits.topLimit) this.setState({ positionY: config.limits.topLimit });\n\t\telse if (this.state.positionY > config.limits.bottomLimit)\n\t\t\tthis.setState({ positionY: config.limits.bottomLimit });\n\t\telse if (this.state.positionX > config.limits.rightLimit)\n\t\t\tthis.setState({ positionX: config.limits.rightLimit });\n\t\telse if (this.state.positionX < config.limits.leftLimit)\n\t\t\tthis.setState({ positionX: config.limits.leftLimit });\n\t};\n\n\tmove = (stepX, stepY) => {\n\t\tconst { positionX, positionY, positionDonutX, positionObstacleX } = this.state;\n\t\tthis.setState({\n\t\t\tpositionX: positionX + stepX,\n\t\t\tpositionY: positionY + stepY\n\t\t});\n\t\tif (positionX !== config.limits.leftLimit)\n\t\t\tthis.setState({\n\t\t\t\tpositionDonutX: positionDonutX - stepX / config.background.defilement,\n\t\t\t\tpositionObstacleX: positionObstacleX - stepX / config.background.defilement\n\t\t\t});\n\n\t\tthis.stopMove();\n\t\tthis.timeOut = setTimeout(() => this.move(stepX, stepY), 20);\n\t\tthis.collisionDetection();\n\t};\n\n\tstopMove = () => {\n\t\tclearTimeout(this.timeOut);\n\t};\n\n\ttick = () => {\n\t\tlet { seconds } = this.state;\n\t\tthis.setState({ seconds: seconds - 1 });\n\n\t\tif (seconds === 0) {\n\t\t\tthis.setState({ seconds: 0 });\n\t\t\talert(\"GAME OVER\");\n\t\t\tclearInterval(this.interval);\n\t\t}\n\t};\n\n\tcomponentDidMount = () => {\n\t\tthis.interval = setInterval(() => this.tick(), 1000);\n\t};\n\n\tpauseTimer = () => {\n\t\tif (this.state.paused === false) {\n\t\t\tclearInterval(this.interval);\n\t\t} else {\n\t\t\tthis.componentDidMount();\n\t\t}\n\t};\n\n\tpauseGame = () => {\n\t\tthis.setState({ paused: !this.state.paused });\n\t\tthis.pauseTimer();\n\t};\n\n\tshowModal = () => {\n\t\tthis.setState({ showModal: true });\n\t};\n\n\thideModal = () => {\n\t\tthis.setState({ showModal: false });\n\t};\n\n\tcollisionDetection = () => {\n\t\tif (\n\t\t\tthis.state.positionX > this.state.positionDonutX - 30 &&\n\t\t\tthis.state.positionX < this.state.positionDonutX + 30 &&\n\t\t\tthis.state.positionY < this.state.positionDonutY + 30 &&\n\t\t\tthis.state.positionY > this.state.positionDonutY - 30\n\t\t)\n\t\t\treturn this.setState({ donutCount: this.state.donutCount + 1 });\n\t};\n\n\tthrowingDonut = () => {\n\t\tthis.setState({ donutCount: this.state.donutCount - 1 });\n\t};\n\n\tpopDonut = () => {\n\t\t// const donutPoped = [\n\t\t// \t{\n\t\t// \t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t// \t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t// \t\tpicked: false\n\t\t// \t},\n\t\t// \t{\n\t\t// \t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t// \t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t// \t\tpicked: false\n\t\t// \t}\n\t\t// ];\n\t\tthis.donutPoped.push({\n\t\t\tpositionDonutX: parseInt(getRandomArbitrary(config.limits.leftLimit, 3000)),\n\t\t\t\tpositionDonutY: parseInt(getRandomArbitrary(config.limits.topLimit, config.limits.bottomLimit)),\n\t\t\t\tpicked: false\n\t\t})\n\t\treturn donutPoped;\n\t};\n\n\trender() {\n\t\tconst bgStyle = {\n\t\t\tbackgroundPositionY: config.background.position,\n\t\t\tbackgroundPositionX: -this.state.positionX / config.background.defilement,\n\t\t\theight: config.background.height\n\t\t};\n\n\t\treturn (\n\t\t\t<div className=\"game\" style={bgStyle}>\n\t\t\t\t{this.testLimitsOfMap()}\n\t\t\t\t<Donut donutPoped={this.popDonut()} />\n\n\t\t\t\t<ObstacleF\n\t\t\t\t\tpositionObstacleX={this.state.positionObstacleX}\n\t\t\t\t\tpositionObstacleY={this.state.positionObstacleY}\n\t\t\t\t/>\n\t\t\t\t<Homer\n\t\t\t\t\tpositionX={this.state.positionX}\n\t\t\t\t\tpositionY={this.state.positionY}\n\t\t\t\t\tdonut={this.state.catchDonut}\n\t\t\t\t\tthrowing={this.state.throwing}\n\t\t\t\t/>\n\t\t\t\t<DonutCounter donutCount={this.state.donutCount} />\n\t\t\t\t<JoyWrapper\n\t\t\t\t\tmove={this.move}\n\t\t\t\t\tstopMove={this.stopMove}\n\t\t\t\t\ttoTheRight={this.toTheRight}\n\t\t\t\t\ttoTheLeft={this.toTheLeft}\n\t\t\t\t\ttoTheTop={this.toTheTop}\n\t\t\t\t\ttoTheBottom={this.toTheBottom}\n\t\t\t\t/>\n\t\t\t\t<BoutonA throwingDonut={this.throwingDonut} />\n\t\t\t\t<Timer pauseGame={this.pauseGame} showModal={this.showModal} seconds={this.state.seconds} />\n\t\t\t\t<Modal\n\t\t\t\t\tclassName=\"modal\"\n\t\t\t\t\tpauseGame={this.pauseGame}\n\t\t\t\t\tshow={this.state.showModal}\n\t\t\t\t\thideModal={this.hideModal}\n\t\t\t\t\tshowModal={this.showModal}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}
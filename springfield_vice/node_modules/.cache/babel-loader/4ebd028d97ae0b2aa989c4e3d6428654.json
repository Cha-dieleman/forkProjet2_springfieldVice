{"ast":null,"code":"import _classCallCheck from\"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Joystick from\"react-joystick\";import config from\"./configSpringfieldVice.json\";// Options à garder en entier le temps des tests.\nvar joystickOptions={zone:document.getElementById(\"test\"),// Où mettre l'élément\n//  color: '#fff',                        // Couleur du js (blanc par défaut)\n//  size: 100,                            // Taille du js (100 par défaut)\nthreshold:0.5,// Force nécessaire (entre 0 et 1)\n//  fadeTime: 250,                        // Temps d'apparition (250 s. par défaut)\nmultitouch:true,// Pas en mode 'static' ou 'semi' : a voir\n// maxNumberOfNipples: 2,                // En MT, le nombre maxi d'instances\ndataOnly:false,// Que les données en sortie (et plus de joystick !)\nposition:{left:config.joystick.positionX,bottom:config.joystick.positionY},// Position en mode 'static' : {left: '10%', bottom: '10%'}\nmode:\"static\",// 'dynamic', 'static' ou 'semi'\nrestJoystick:true,// Retour au centre du js quand repos\nrestOpacity:0.7,// Opacité - hors mode 'dynamic' (défaut à 0.5)\nlockX:false,// Bloqué sur l'axe horizontal (?)\nlockY:false,// Bloqué sur l'axe vertical (?)\n//  catchDistance: 50,                    // En mode 'semi', périmètre réservé pour garder le js\ndynamicPage:true// Mettre true si DOM dynamique (comme react)\n};var JoyWrapper=/*#__PURE__*/function(_React$Component){_inherits(JoyWrapper,_React$Component);function JoyWrapper(props){var _this;_classCallCheck(this,JoyWrapper);_this=_possibleConstructorReturn(this,_getPrototypeOf(JoyWrapper).call(this,props));_this.joystickContainer={// possibiité de limiter la place du joystick\nheight:\"100%\",overflow:\"hidden\"};_this.managerListener=function(manager){manager.on(\"start\",function(){// Appui par pression\n_this.props.startRunning();// this.props.move(\n// \tMath.floor(manager[0].frontPosition.x) / config.joystick.vitesseX,\n// \tMath.floor(manager[0].frontPosition.y) / config.joystick.vitesseY\n// \t);\n});manager.on(\"move\",function(){// Action à l'appui long\n_this.props.setStep(Math.floor(manager[0].frontPosition.x)/config.joystick.vitesseX,Math.floor(manager[0].frontPosition.y)/config.joystick.vitesseY);});manager.on(\"end\",function(){// Action au relacher\n_this.props.stopRunning();});};_this.state={};return _this;}_createClass(JoyWrapper,[{key:\"render\",value:function render(){var displayJoystick=!this.props.displayJoystick?\"block\":\"none\";var joystickStyle={display:displayJoystick};return React.createElement(\"div\",{id:\"joystick\",style:joystickStyle},React.createElement(Joystick,{options:joystickOptions,containerStyle:this.joystickContainer,managerListener:this.managerListener}));}}]);return JoyWrapper;}(React.Component);export default JoyWrapper;","map":{"version":3,"sources":["/Users/oliv/Documents/GIT_PROJET03/lyon-0919-react-p2-springfield-vice/springfield_vice/src/components/Joystick.js"],"names":["React","Joystick","config","joystickOptions","zone","document","getElementById","threshold","multitouch","dataOnly","position","left","joystick","positionX","bottom","positionY","mode","restJoystick","restOpacity","lockX","lockY","dynamicPage","JoyWrapper","props","joystickContainer","height","overflow","managerListener","manager","on","startRunning","setStep","Math","floor","frontPosition","x","vitesseX","y","vitesseY","stopRunning","state","displayJoystick","joystickStyle","display","Component"],"mappings":"g2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,8BAAnB,CAEA;AAEA,GAAMC,CAAAA,eAAe,CAAG,CACvBC,IAAI,CAAEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CADiB,CACgB;AACvC;AACA;AACAC,SAAS,CAAE,GAJY,CAIP;AAChB;AACAC,UAAU,CAAE,IANW,CAMe;AACtC;AACAC,QAAQ,CAAE,KARa,CAQN;AACjBC,QAAQ,CAAE,CAAEC,IAAI,CAAET,MAAM,CAACU,QAAP,CAAgBC,SAAxB,CAAmCC,MAAM,CAAEZ,MAAM,CAACU,QAAP,CAAgBG,SAA3D,CATa,CAS2D;AAClFC,IAAI,CAAE,QAViB,CAUP;AAChBC,YAAY,CAAE,IAXS,CAWH;AACpBC,WAAW,CAAE,GAZU,CAYL;AAClBC,KAAK,CAAE,KAbgB,CAaT;AACdC,KAAK,CAAE,KAdgB,CAcT;AACd;AACAC,WAAW,CAAE,IAAK;AAhBK,CAAxB,C,GAmBMC,CAAAA,U,gFACL,oBAAYC,KAAZ,CAAmB,4CAClB,4EAAMA,KAAN,GADkB,MAMnBC,iBANmB,CAMC,CACnB;AACAC,MAAM,CAAE,MAFW,CAGnBC,QAAQ,CAAE,QAHS,CAND,OAanBC,eAbmB,CAaD,SAACC,OAAD,CAAa,CAC9BA,OAAO,CAACC,EAAR,CAAW,OAAX,CAAoB,UAAM,CACzB;AACA,MAAKN,KAAL,CAAWO,YAAX,GACA;AACC;AACA;AACA;AACA,CAPF,EAQCF,OAAO,CAACC,EAAR,CAAW,MAAX,CAAmB,UAAM,CACxB;AACA,MAAKN,KAAL,CAAWQ,OAAX,CACCC,IAAI,CAACC,KAAL,CAAWL,OAAO,CAAC,CAAD,CAAP,CAAWM,aAAX,CAAyBC,CAApC,EAAyCjC,MAAM,CAACU,QAAP,CAAgBwB,QAD1D,CAECJ,IAAI,CAACC,KAAL,CAAWL,OAAO,CAAC,CAAD,CAAP,CAAWM,aAAX,CAAyBG,CAApC,EAAyCnC,MAAM,CAACU,QAAP,CAAgB0B,QAF1D,EAIC,CANF,EAOCV,OAAO,CAACC,EAAR,CAAW,KAAX,CAAkB,UAAM,CACvB;AACA,MAAKN,KAAL,CAAWgB,WAAX,GACA,CAHD,EAIA,CAjCgB,CAElB,MAAKC,KAAL,CAAa,EAAb,CAFkB,aAIlB,C,8DA+BQ,CACR,GAAMC,CAAAA,eAAe,CAAG,CAAC,KAAKlB,KAAL,CAAWkB,eAAZ,CAA8B,OAA9B,CAAwC,MAAhE,CACA,GAAMC,CAAAA,aAAa,CAAG,CACrBC,OAAO,CAAEF,eADY,CAAtB,CAIA,MACC,4BAAK,EAAE,CAAC,UAAR,CAAmB,KAAK,CAAEC,aAA1B,EACC,oBAAC,QAAD,EACC,OAAO,CAAEvC,eADV,CAEC,cAAc,CAAE,KAAKqB,iBAFtB,CAGC,eAAe,CAAE,KAAKG,eAHvB,EADD,CADD,CASA,C,wBAnDuB3B,KAAK,CAAC4C,S,EAsD/B,cAAetB,CAAAA,UAAf","sourcesContent":["import React from \"react\";\nimport Joystick from \"react-joystick\";\nimport config from \"./configSpringfieldVice.json\";\n\n// Options à garder en entier le temps des tests.\n\nconst joystickOptions = {\n\tzone: document.getElementById(\"test\"), // Où mettre l'élément\n\t//  color: '#fff',                        // Couleur du js (blanc par défaut)\n\t//  size: 100,                            // Taille du js (100 par défaut)\n\tthreshold: 0.5, // Force nécessaire (entre 0 et 1)\n\t//  fadeTime: 250,                        // Temps d'apparition (250 s. par défaut)\n\tmultitouch: true,                     // Pas en mode 'static' ou 'semi' : a voir\n\t// maxNumberOfNipples: 2,                // En MT, le nombre maxi d'instances\n\tdataOnly: false, // Que les données en sortie (et plus de joystick !)\n\tposition: { left: config.joystick.positionX, bottom: config.joystick.positionY }, // Position en mode 'static' : {left: '10%', bottom: '10%'}\n\tmode: \"static\", // 'dynamic', 'static' ou 'semi'\n\trestJoystick: true, // Retour au centre du js quand repos\n\trestOpacity: 0.7, // Opacité - hors mode 'dynamic' (défaut à 0.5)\n\tlockX: false, // Bloqué sur l'axe horizontal (?)\n\tlockY: false, // Bloqué sur l'axe vertical (?)\n\t//  catchDistance: 50,                    // En mode 'semi', périmètre réservé pour garder le js\n\tdynamicPage: true // Mettre true si DOM dynamique (comme react)\n};\n\nclass JoyWrapper extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t};\n\t}\n\n\tjoystickContainer = {\n\t\t// possibiité de limiter la place du joystick\n\t\theight: \"100%\",\n\t\toverflow: \"hidden\",\n\t};\n\n\t\n\tmanagerListener = (manager) => {\n\t\tmanager.on(\"start\", () => {\n\t\t\t// Appui par pression\n\t\t\tthis.props.startRunning();\n\t\t\t// this.props.move(\n\t\t\t\t// \tMath.floor(manager[0].frontPosition.x) / config.joystick.vitesseX,\n\t\t\t\t// \tMath.floor(manager[0].frontPosition.y) / config.joystick.vitesseY\n\t\t\t\t// \t);\n\t\t\t});\n\t\t\tmanager.on(\"move\", () => {\n\t\t\t\t// Action à l'appui long\n\t\t\t\tthis.props.setStep(\n\t\t\t\t\tMath.floor(manager[0].frontPosition.x) / config.joystick.vitesseX,\n\t\t\t\t\tMath.floor(manager[0].frontPosition.y) / config.joystick.vitesseY\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tmanager.on(\"end\", () => {\n\t\t\t\t\t// Action au relacher\n\t\t\t\t\tthis.props.stopRunning();\n\t\t\t\t});\n\t\t\t};\n\t\t\t\n\trender() {\n\t\tconst displayJoystick = !this.props.displayJoystick ? \"block\" : \"none\";\n\t\tconst joystickStyle = {\n\t\t\tdisplay: displayJoystick,\n\t\t}\n\n\t\treturn (\n\t\t\t<div id=\"joystick\" style={joystickStyle}>\n\t\t\t\t<Joystick\n\t\t\t\t\toptions={joystickOptions}\n\t\t\t\t\tcontainerStyle={this.joystickContainer}\n\t\t\t\t\tmanagerListener={this.managerListener}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default JoyWrapper;\n"]},"metadata":{},"sourceType":"module"}